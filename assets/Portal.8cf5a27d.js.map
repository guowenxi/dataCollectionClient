{"version":3,"file":"Portal.8cf5a27d.js","sources":["../node_modules/_@rc-component_portal@1.1.0@@rc-component/portal/es/Context.js","../node_modules/_@rc-component_portal@1.1.0@@rc-component/portal/es/useDom.js","../node_modules/_@rc-component_portal@1.1.0@@rc-component/portal/es/util.js","../node_modules/_@rc-component_portal@1.1.0@@rc-component/portal/es/useScrollLocker.js","../node_modules/_@rc-component_portal@1.1.0@@rc-component/portal/es/mock.js","../node_modules/_@rc-component_portal@1.1.0@@rc-component/portal/es/Portal.js"],"sourcesContent":["import * as React from 'react';\nvar OrderContext = /*#__PURE__*/React.createContext(null);\nexport default OrderContext;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport OrderContext from \"./Context\";\nvar EMPTY_LIST = [];\n/**\n * Will add `div` to document. Nest call will keep order\n * @param render Render DOM in document\n */\n\nexport default function useDom(render, debug) {\n  var _React$useState = React.useState(function () {\n    if (!canUseDom()) {\n      return null;\n    }\n\n    var defaultEle = document.createElement('div');\n\n    if (process.env.NODE_ENV !== 'production' && debug) {\n      defaultEle.setAttribute('data-debug', debug);\n    }\n\n    return defaultEle;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      ele = _React$useState2[0]; // ========================== Order ==========================\n\n\n  var appendedRef = React.useRef(false);\n  var queueCreate = React.useContext(OrderContext);\n\n  var _React$useState3 = React.useState(EMPTY_LIST),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      queue = _React$useState4[0],\n      setQueue = _React$useState4[1];\n\n  var mergedQueueCreate = queueCreate || (appendedRef.current ? undefined : function (appendFn) {\n    setQueue(function (origin) {\n      var newQueue = [appendFn].concat(_toConsumableArray(origin));\n      return newQueue;\n    });\n  }); // =========================== DOM ===========================\n\n  function append() {\n    if (!ele.parentElement) {\n      document.body.appendChild(ele);\n    }\n\n    appendedRef.current = true;\n  }\n\n  function cleanup() {\n    var _ele$parentElement;\n\n    (_ele$parentElement = ele.parentElement) === null || _ele$parentElement === void 0 ? void 0 : _ele$parentElement.removeChild(ele);\n    appendedRef.current = false;\n  }\n\n  useLayoutEffect(function () {\n    if (render) {\n      if (queueCreate) {\n        queueCreate(append);\n      } else {\n        append();\n      }\n    } else {\n      cleanup();\n    }\n\n    return cleanup;\n  }, [render]);\n  useLayoutEffect(function () {\n    if (queue.length) {\n      queue.forEach(function (appendFn) {\n        return appendFn();\n      });\n      setQueue(EMPTY_LIST);\n    }\n  }, [queue]);\n  return [ele, mergedQueueCreate];\n}","/**\n * Test usage export. Do not use in your production\n */\nexport function isBodyOverflowing() {\n  return document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight) && window.innerWidth > document.body.offsetWidth;\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { updateCSS, removeCSS } from \"rc-util/es/Dom/dynamicCSS\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport getScrollBarSize from \"rc-util/es/getScrollBarSize\";\nimport { isBodyOverflowing } from \"./util\";\nvar UNIQUE_ID = \"rc-util-locker-\".concat(Date.now());\nvar uuid = 0;\nexport default function useScrollLocker(lock) {\n  var mergedLock = !!lock;\n\n  var _React$useState = React.useState(function () {\n    uuid += 1;\n    return \"\".concat(UNIQUE_ID, \"_\").concat(uuid);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      id = _React$useState2[0];\n\n  useLayoutEffect(function () {\n    if (mergedLock) {\n      var scrollbarSize = getScrollBarSize();\n      var isOverflow = isBodyOverflowing();\n      updateCSS(\"\\nhtml body {\\n  overflow-y: hidden;\\n  \".concat(isOverflow ? \"width: calc(100% - \".concat(scrollbarSize, \"px);\") : '', \"\\n}\"), id);\n    } else {\n      removeCSS(id);\n    }\n\n    return function () {\n      removeCSS(id);\n    };\n  }, [mergedLock, id]);\n}","export var inline = false;\nexport function inlineMock(nextInline) {\n  if (typeof nextInline === 'boolean') {\n    inline = nextInline;\n  }\n\n  return inline;\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport { supportRef, useComposeRef } from \"rc-util/es/ref\";\nimport OrderContext from \"./Context\";\nimport useDom from \"./useDom\";\nimport useScrollLocker from \"./useScrollLocker\";\nimport { inlineMock } from \"./mock\";\n\nvar getPortalContainer = function getPortalContainer(getContainer) {\n  if (getContainer === false) {\n    return false;\n  }\n\n  if (!canUseDom() || !getContainer) {\n    return null;\n  }\n\n  if (typeof getContainer === 'string') {\n    return document.querySelector(getContainer);\n  }\n\n  if (typeof getContainer === 'function') {\n    return getContainer();\n  }\n\n  return getContainer;\n};\n\nvar Portal = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var open = props.open,\n      autoLock = props.autoLock,\n      getContainer = props.getContainer,\n      debug = props.debug,\n      _props$autoDestroy = props.autoDestroy,\n      autoDestroy = _props$autoDestroy === void 0 ? true : _props$autoDestroy,\n      children = props.children;\n\n  var _React$useState = React.useState(open),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      shouldRender = _React$useState2[0],\n      setShouldRender = _React$useState2[1];\n\n  var mergedRender = shouldRender || open; // ====================== Should Render ======================\n\n  React.useEffect(function () {\n    if (autoDestroy || open) {\n      setShouldRender(open);\n    }\n  }, [open, autoDestroy]); // ======================== Container ========================\n\n  var _React$useState3 = React.useState(function () {\n    return getPortalContainer(getContainer);\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      innerContainer = _React$useState4[0],\n      setInnerContainer = _React$useState4[1];\n\n  React.useEffect(function () {\n    var customizeContainer = getPortalContainer(getContainer); // Tell component that we check this in effect which is safe to be `null`\n\n    setInnerContainer(customizeContainer !== null && customizeContainer !== void 0 ? customizeContainer : null);\n  });\n\n  var _useDom = useDom(mergedRender && !innerContainer, debug),\n      _useDom2 = _slicedToArray(_useDom, 2),\n      defaultContainer = _useDom2[0],\n      queueCreate = _useDom2[1];\n\n  var mergedContainer = innerContainer !== null && innerContainer !== void 0 ? innerContainer : defaultContainer; // ========================= Locker ==========================\n\n  useScrollLocker(autoLock && open && canUseDom() && (mergedContainer === defaultContainer || mergedContainer === document.body)); // =========================== Ref ===========================\n\n  var childRef = null;\n\n  if (children && supportRef(children) && ref) {\n    var _ref = children;\n    childRef = _ref.ref;\n  }\n\n  var mergedRef = useComposeRef(childRef, ref); // ========================= Render ==========================\n  // Do not render when nothing need render\n  // When innerContainer is `undefined`, it may not ready since user use ref in the same render\n\n  if (!mergedRender || !canUseDom() || innerContainer === undefined) {\n    return null;\n  } // Render inline\n\n\n  var renderInline = mergedContainer === false || inlineMock();\n  var reffedChildren = children;\n\n  if (ref) {\n    reffedChildren = /*#__PURE__*/React.cloneElement(children, {\n      ref: mergedRef\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(OrderContext.Provider, {\n    value: queueCreate\n  }, renderInline ? reffedChildren : /*#__PURE__*/createPortal(reffedChildren, mergedContainer));\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Portal.displayName = 'Portal';\n}\n\nexport default Portal;"],"names":["OrderContext","React.createContext","EMPTY_LIST","useDom","render","debug","_React$useState","React.useState","canUseDom","defaultEle","_React$useState2","_slicedToArray","ele","appendedRef","React.useRef","queueCreate","React.useContext","_React$useState3","_React$useState4","queue","setQueue","mergedQueueCreate","appendFn","origin","newQueue","_toConsumableArray","append","cleanup","_ele$parentElement","useLayoutEffect","isBodyOverflowing","UNIQUE_ID","uuid","useScrollLocker","lock","mergedLock","id","scrollbarSize","getScrollBarSize","isOverflow","updateCSS","removeCSS","inline","inlineMock","nextInline","getPortalContainer","getContainer","Portal","React.forwardRef","props","ref","open","autoLock","_props$autoDestroy","autoDestroy","children","shouldRender","setShouldRender","mergedRender","React.useEffect","innerContainer","setInnerContainer","customizeContainer","_useDom","_useDom2","defaultContainer","mergedContainer","childRef","supportRef","_ref","mergedRef","useComposeRef","renderInline","reffedChildren","React.cloneElement","React.createElement","createPortal"],"mappings":"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"}