{"version":3,"file":"index.de78d9fa.js","sources":["../node_modules/_ahooks@3.7.3@ahooks/es/createUpdateEffect/index.js","../node_modules/_tslib@2.4.1@tslib/tslib.es6.js","../node_modules/_ahooks@3.7.3@ahooks/es/utils/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/utils/isDev.js","../node_modules/_ahooks@3.7.3@ahooks/es/useMemoizedFn/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useUpdateEffect/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/useAutoRunPlugin.js","../node_modules/_ahooks@3.7.3@ahooks/es/utils/depsAreSame.js","../node_modules/_ahooks@3.7.3@ahooks/es/useCreation/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useLatest/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useUnmount/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/cache.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/cachePromise.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/cacheSubscribe.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/useCachePlugin.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/useDebouncePlugin.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/useLoadingDelayPlugin.js","../node_modules/_ahooks@3.7.3@ahooks/es/utils/isBrowser.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/isDocumentVisible.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/subscribeReVisible.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/usePollingPlugin.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/limit.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/isOnline.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/utils/subscribeFocus.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/useRefreshOnWindowFocusPlugin.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/useRetryPlugin.js","../node_modules/_lodash@4.17.21@lodash/throttle.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/plugins/useThrottlePlugin.js","../node_modules/_ahooks@3.7.3@ahooks/es/useMount/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useUpdate/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/Fetch.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/useRequestImplement.js","../node_modules/_ahooks@3.7.3@ahooks/es/useRequest/src/useRequest.js","../node_modules/_ahooks@3.7.3@ahooks/es/usePagination/index.js","../node_modules/_ahooks@3.7.3@ahooks/es/useAntdTable/index.js"],"sourcesContent":["import { useRef } from 'react';\nexport const createUpdateEffect = hook => (effect, deps) => {\n  const isMounted = useRef(false);\n  // for react-refresh\n  hook(() => {\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  hook(() => {\n    if (!isMounted.current) {\n      isMounted.current = true;\n    } else {\n      return effect();\n    }\n  }, deps);\n};\nexport default createUpdateEffect;","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export const isObject = value => value !== null && typeof value === 'object';\nexport const isFunction = value => typeof value === 'function';\nexport const isString = value => typeof value === 'string';\nexport const isBoolean = value => typeof value === 'boolean';\nexport const isNumber = value => typeof value === 'number';\nexport const isUndef = value => typeof value === 'undefined';","const isDev = process.env.NODE_ENV === 'development' || process.env.NODE_ENV === 'test';\nexport default isDev;","import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport isDev from '../utils/isDev';\nfunction useMemoizedFn(fn) {\n  if (isDev) {\n    if (!isFunction(fn)) {\n      console.error(`useMemoizedFn expected parameter is a function, got ${typeof fn}`);\n    }\n  }\n  const fnRef = useRef(fn);\n  // why not write `fnRef.current = fn`?\n  // https://github.com/alibaba/hooks/issues/728\n  fnRef.current = useMemo(() => fn, [fn]);\n  const memoizedFn = useRef();\n  if (!memoizedFn.current) {\n    memoizedFn.current = function (...args) {\n      return fnRef.current.apply(this, args);\n    };\n  }\n  return memoizedFn.current;\n}\nexport default useMemoizedFn;","import { useEffect } from 'react';\nimport { createUpdateEffect } from '../createUpdateEffect';\nexport default createUpdateEffect(useEffect);","import { useRef } from 'react';\nimport useUpdateEffect from '../../../useUpdateEffect';\n// support refreshDeps & ready\nconst useAutoRunPlugin = (fetchInstance, {\n  manual,\n  ready = true,\n  defaultParams = [],\n  refreshDeps = [],\n  refreshDepsAction\n}) => {\n  const hasAutoRun = useRef(false);\n  hasAutoRun.current = false;\n  useUpdateEffect(() => {\n    if (!manual && ready) {\n      hasAutoRun.current = true;\n      fetchInstance.run(...defaultParams);\n    }\n  }, [ready]);\n  useUpdateEffect(() => {\n    if (hasAutoRun.current) {\n      return;\n    }\n    if (!manual) {\n      hasAutoRun.current = true;\n      if (refreshDepsAction) {\n        refreshDepsAction();\n      } else {\n        fetchInstance.refresh();\n      }\n    }\n  }, [...refreshDeps]);\n  return {\n    onBefore: () => {\n      if (!ready) {\n        return {\n          stopNow: true\n        };\n      }\n    }\n  };\n};\nuseAutoRunPlugin.onInit = ({\n  ready = true,\n  manual\n}) => {\n  return {\n    loading: !manual && ready\n  };\n};\nexport default useAutoRunPlugin;","export default function depsAreSame(oldDeps, deps) {\n  if (oldDeps === deps) return true;\n  for (let i = 0; i < oldDeps.length; i++) {\n    if (!Object.is(oldDeps[i], deps[i])) return false;\n  }\n  return true;\n}","import { useRef } from 'react';\nimport depsAreSame from '../utils/depsAreSame';\nexport default function useCreation(factory, deps) {\n  const {\n    current\n  } = useRef({\n    deps,\n    obj: undefined,\n    initialized: false\n  });\n  if (current.initialized === false || !depsAreSame(current.deps, deps)) {\n    current.deps = deps;\n    current.obj = factory();\n    current.initialized = true;\n  }\n  return current.obj;\n}","import { useRef } from 'react';\nfunction useLatest(value) {\n  const ref = useRef(value);\n  ref.current = value;\n  return ref;\n}\nexport default useLatest;","import { useEffect } from 'react';\nimport useLatest from '../useLatest';\nimport { isFunction } from '../utils';\nimport isDev from '../utils/isDev';\nconst useUnmount = fn => {\n  if (isDev) {\n    if (!isFunction(fn)) {\n      console.error(`useUnmount expected parameter is a function, got ${typeof fn}`);\n    }\n  }\n  const fnRef = useLatest(fn);\n  useEffect(() => () => {\n    fnRef.current();\n  }, []);\n};\nexport default useUnmount;","const cache = new Map();\nconst setCache = (key, cacheTime, cachedData) => {\n  const currentCache = cache.get(key);\n  if (currentCache === null || currentCache === void 0 ? void 0 : currentCache.timer) {\n    clearTimeout(currentCache.timer);\n  }\n  let timer = undefined;\n  if (cacheTime > -1) {\n    // if cache out, clear it\n    timer = setTimeout(() => {\n      cache.delete(key);\n    }, cacheTime);\n  }\n  cache.set(key, Object.assign(Object.assign({}, cachedData), {\n    timer\n  }));\n};\nconst getCache = key => {\n  return cache.get(key);\n};\nconst clearCache = key => {\n  if (key) {\n    const cacheKeys = Array.isArray(key) ? key : [key];\n    cacheKeys.forEach(cacheKey => cache.delete(cacheKey));\n  } else {\n    cache.clear();\n  }\n};\nexport { getCache, setCache, clearCache };","const cachePromise = new Map();\nconst getCachePromise = cacheKey => {\n  return cachePromise.get(cacheKey);\n};\nconst setCachePromise = (cacheKey, promise) => {\n  // Should cache the same promise, cannot be promise.finally\n  // Because the promise.finally will change the reference of the promise\n  cachePromise.set(cacheKey, promise);\n  // no use promise.finally for compatibility\n  promise.then(res => {\n    cachePromise.delete(cacheKey);\n    return res;\n  }).catch(() => {\n    cachePromise.delete(cacheKey);\n  });\n};\nexport { getCachePromise, setCachePromise };","const listeners = {};\nconst trigger = (key, data) => {\n  if (listeners[key]) {\n    listeners[key].forEach(item => item(data));\n  }\n};\nconst subscribe = (key, listener) => {\n  if (!listeners[key]) {\n    listeners[key] = [];\n  }\n  listeners[key].push(listener);\n  return function unsubscribe() {\n    const index = listeners[key].indexOf(listener);\n    listeners[key].splice(index, 1);\n  };\n};\nexport { trigger, subscribe };","import { useRef } from 'react';\nimport useCreation from '../../../useCreation';\nimport useUnmount from '../../../useUnmount';\nimport * as cache from '../utils/cache';\nimport * as cachePromise from '../utils/cachePromise';\nimport * as cacheSubscribe from '../utils/cacheSubscribe';\nconst useCachePlugin = (fetchInstance, {\n  cacheKey,\n  cacheTime = 5 * 60 * 1000,\n  staleTime = 0,\n  setCache: customSetCache,\n  getCache: customGetCache\n}) => {\n  const unSubscribeRef = useRef();\n  const currentPromiseRef = useRef();\n  const _setCache = (key, cachedData) => {\n    if (customSetCache) {\n      customSetCache(cachedData);\n    } else {\n      cache.setCache(key, cacheTime, cachedData);\n    }\n    cacheSubscribe.trigger(key, cachedData.data);\n  };\n  const _getCache = (key, params = []) => {\n    if (customGetCache) {\n      return customGetCache(params);\n    }\n    return cache.getCache(key);\n  };\n  useCreation(() => {\n    if (!cacheKey) {\n      return;\n    }\n    // get data from cache when init\n    const cacheData = _getCache(cacheKey);\n    if (cacheData && Object.hasOwnProperty.call(cacheData, 'data')) {\n      fetchInstance.state.data = cacheData.data;\n      fetchInstance.state.params = cacheData.params;\n      if (staleTime === -1 || new Date().getTime() - cacheData.time <= staleTime) {\n        fetchInstance.state.loading = false;\n      }\n    }\n    // subscribe same cachekey update, trigger update\n    unSubscribeRef.current = cacheSubscribe.subscribe(cacheKey, data => {\n      fetchInstance.setState({\n        data\n      });\n    });\n  }, []);\n  useUnmount(() => {\n    var _a;\n    (_a = unSubscribeRef.current) === null || _a === void 0 ? void 0 : _a.call(unSubscribeRef);\n  });\n  if (!cacheKey) {\n    return {};\n  }\n  return {\n    onBefore: params => {\n      const cacheData = _getCache(cacheKey, params);\n      if (!cacheData || !Object.hasOwnProperty.call(cacheData, 'data')) {\n        return {};\n      }\n      // If the data is fresh, stop request\n      if (staleTime === -1 || new Date().getTime() - cacheData.time <= staleTime) {\n        return {\n          loading: false,\n          data: cacheData === null || cacheData === void 0 ? void 0 : cacheData.data,\n          error: undefined,\n          returnNow: true\n        };\n      } else {\n        // If the data is stale, return data, and request continue\n        return {\n          data: cacheData === null || cacheData === void 0 ? void 0 : cacheData.data,\n          error: undefined\n        };\n      }\n    },\n    onRequest: (service, args) => {\n      let servicePromise = cachePromise.getCachePromise(cacheKey);\n      // If has servicePromise, and is not trigger by self, then use it\n      if (servicePromise && servicePromise !== currentPromiseRef.current) {\n        return {\n          servicePromise\n        };\n      }\n      servicePromise = service(...args);\n      currentPromiseRef.current = servicePromise;\n      cachePromise.setCachePromise(cacheKey, servicePromise);\n      return {\n        servicePromise\n      };\n    },\n    onSuccess: (data, params) => {\n      var _a;\n      if (cacheKey) {\n        // cancel subscribe, avoid trgger self\n        (_a = unSubscribeRef.current) === null || _a === void 0 ? void 0 : _a.call(unSubscribeRef);\n        _setCache(cacheKey, {\n          data,\n          params,\n          time: new Date().getTime()\n        });\n        // resubscribe\n        unSubscribeRef.current = cacheSubscribe.subscribe(cacheKey, d => {\n          fetchInstance.setState({\n            data: d\n          });\n        });\n      }\n    },\n    onMutate: data => {\n      var _a;\n      if (cacheKey) {\n        // cancel subscribe, avoid trigger self\n        (_a = unSubscribeRef.current) === null || _a === void 0 ? void 0 : _a.call(unSubscribeRef);\n        _setCache(cacheKey, {\n          data,\n          params: fetchInstance.state.params,\n          time: new Date().getTime()\n        });\n        // resubscribe\n        unSubscribeRef.current = cacheSubscribe.subscribe(cacheKey, d => {\n          fetchInstance.setState({\n            data: d\n          });\n        });\n      }\n    }\n  };\n};\nexport default useCachePlugin;","import debounce from 'lodash/debounce';\nimport { useEffect, useMemo, useRef } from 'react';\nconst useDebouncePlugin = (fetchInstance, {\n  debounceWait,\n  debounceLeading,\n  debounceTrailing,\n  debounceMaxWait\n}) => {\n  const debouncedRef = useRef();\n  const options = useMemo(() => {\n    const ret = {};\n    if (debounceLeading !== undefined) {\n      ret.leading = debounceLeading;\n    }\n    if (debounceTrailing !== undefined) {\n      ret.trailing = debounceTrailing;\n    }\n    if (debounceMaxWait !== undefined) {\n      ret.maxWait = debounceMaxWait;\n    }\n    return ret;\n  }, [debounceLeading, debounceTrailing, debounceMaxWait]);\n  useEffect(() => {\n    if (debounceWait) {\n      const _originRunAsync = fetchInstance.runAsync.bind(fetchInstance);\n      debouncedRef.current = debounce(callback => {\n        callback();\n      }, debounceWait, options);\n      // debounce runAsync should be promise\n      // https://github.com/lodash/lodash/issues/4400#issuecomment-834800398\n      fetchInstance.runAsync = (...args) => {\n        return new Promise((resolve, reject) => {\n          var _a;\n          (_a = debouncedRef.current) === null || _a === void 0 ? void 0 : _a.call(debouncedRef, () => {\n            _originRunAsync(...args).then(resolve).catch(reject);\n          });\n        });\n      };\n      return () => {\n        var _a;\n        (_a = debouncedRef.current) === null || _a === void 0 ? void 0 : _a.cancel();\n        fetchInstance.runAsync = _originRunAsync;\n      };\n    }\n  }, [debounceWait, options]);\n  if (!debounceWait) {\n    return {};\n  }\n  return {\n    onCancel: () => {\n      var _a;\n      (_a = debouncedRef.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    }\n  };\n};\nexport default useDebouncePlugin;","import { useRef } from 'react';\nconst useLoadingDelayPlugin = (fetchInstance, {\n  loadingDelay\n}) => {\n  const timerRef = useRef();\n  if (!loadingDelay) {\n    return {};\n  }\n  const cancelTimeout = () => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n    }\n  };\n  return {\n    onBefore: () => {\n      cancelTimeout();\n      timerRef.current = setTimeout(() => {\n        fetchInstance.setState({\n          loading: true\n        });\n      }, loadingDelay);\n      return {\n        loading: false\n      };\n    },\n    onFinally: () => {\n      cancelTimeout();\n    },\n    onCancel: () => {\n      cancelTimeout();\n    }\n  };\n};\nexport default useLoadingDelayPlugin;","const isBrowser = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nexport default isBrowser;","import isBrowser from '../../../utils/isBrowser';\nexport default function isDocumentVisible() {\n  if (isBrowser) {\n    return document.visibilityState !== 'hidden';\n  }\n  return true;\n}","import isBrowser from '../../../utils/isBrowser';\nimport isDocumentVisible from './isDocumentVisible';\nconst listeners = [];\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    const index = listeners.indexOf(listener);\n    listeners.splice(index, 1);\n  };\n}\nif (isBrowser) {\n  const revalidate = () => {\n    if (!isDocumentVisible()) return;\n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i];\n      listener();\n    }\n  };\n  window.addEventListener('visibilitychange', revalidate, false);\n}\nexport default subscribe;","import { useRef } from 'react';\nimport useUpdateEffect from '../../../useUpdateEffect';\nimport isDocumentVisible from '../utils/isDocumentVisible';\nimport subscribeReVisible from '../utils/subscribeReVisible';\nconst usePollingPlugin = (fetchInstance, {\n  pollingInterval,\n  pollingWhenHidden = true,\n  pollingErrorRetryCount = -1\n}) => {\n  const timerRef = useRef();\n  const unsubscribeRef = useRef();\n  const countRef = useRef(0);\n  const stopPolling = () => {\n    var _a;\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n    }\n    (_a = unsubscribeRef.current) === null || _a === void 0 ? void 0 : _a.call(unsubscribeRef);\n  };\n  useUpdateEffect(() => {\n    if (!pollingInterval) {\n      stopPolling();\n    }\n  }, [pollingInterval]);\n  if (!pollingInterval) {\n    return {};\n  }\n  return {\n    onBefore: () => {\n      stopPolling();\n    },\n    onError: () => {\n      countRef.current += 1;\n    },\n    onSuccess: () => {\n      countRef.current = 0;\n    },\n    onFinally: () => {\n      if (pollingErrorRetryCount === -1 ||\n      // When an error occurs, the request is not repeated after pollingErrorRetryCount retries\n      pollingErrorRetryCount !== -1 && countRef.current <= pollingErrorRetryCount) {\n        timerRef.current = setTimeout(() => {\n          // if pollingWhenHidden = false && document is hidden, then stop polling and subscribe revisible\n          if (!pollingWhenHidden && !isDocumentVisible()) {\n            unsubscribeRef.current = subscribeReVisible(() => {\n              fetchInstance.refresh();\n            });\n          } else {\n            fetchInstance.refresh();\n          }\n        }, pollingInterval);\n      } else {\n        countRef.current = 0;\n      }\n    },\n    onCancel: () => {\n      stopPolling();\n    }\n  };\n};\nexport default usePollingPlugin;","export default function limit(fn, timespan) {\n  let pending = false;\n  return (...args) => {\n    if (pending) return;\n    pending = true;\n    fn(...args);\n    setTimeout(() => {\n      pending = false;\n    }, timespan);\n  };\n}","import isBrowser from '../../../utils/isBrowser';\nexport default function isOnline() {\n  if (isBrowser && typeof navigator.onLine !== 'undefined') {\n    return navigator.onLine;\n  }\n  return true;\n}","// from swr\nimport isBrowser from '../../../utils/isBrowser';\nimport isDocumentVisible from './isDocumentVisible';\nimport isOnline from './isOnline';\nconst listeners = [];\nfunction subscribe(listener) {\n  listeners.push(listener);\n  return function unsubscribe() {\n    const index = listeners.indexOf(listener);\n    if (index > -1) {\n      listeners.splice(index, 1);\n    }\n  };\n}\nif (isBrowser) {\n  const revalidate = () => {\n    if (!isDocumentVisible() || !isOnline()) return;\n    for (let i = 0; i < listeners.length; i++) {\n      const listener = listeners[i];\n      listener();\n    }\n  };\n  window.addEventListener('visibilitychange', revalidate, false);\n  window.addEventListener('focus', revalidate, false);\n}\nexport default subscribe;","import { useEffect, useRef } from 'react';\nimport useUnmount from '../../../useUnmount';\nimport limit from '../utils/limit';\nimport subscribeFocus from '../utils/subscribeFocus';\nconst useRefreshOnWindowFocusPlugin = (fetchInstance, {\n  refreshOnWindowFocus,\n  focusTimespan = 5000\n}) => {\n  const unsubscribeRef = useRef();\n  const stopSubscribe = () => {\n    var _a;\n    (_a = unsubscribeRef.current) === null || _a === void 0 ? void 0 : _a.call(unsubscribeRef);\n  };\n  useEffect(() => {\n    if (refreshOnWindowFocus) {\n      const limitRefresh = limit(fetchInstance.refresh.bind(fetchInstance), focusTimespan);\n      unsubscribeRef.current = subscribeFocus(() => {\n        limitRefresh();\n      });\n    }\n    return () => {\n      stopSubscribe();\n    };\n  }, [refreshOnWindowFocus, focusTimespan]);\n  useUnmount(() => {\n    stopSubscribe();\n  });\n  return {};\n};\nexport default useRefreshOnWindowFocusPlugin;","import { useRef } from 'react';\nconst useRetryPlugin = (fetchInstance, {\n  retryInterval,\n  retryCount\n}) => {\n  const timerRef = useRef();\n  const countRef = useRef(0);\n  const triggerByRetry = useRef(false);\n  if (!retryCount) {\n    return {};\n  }\n  return {\n    onBefore: () => {\n      if (!triggerByRetry.current) {\n        countRef.current = 0;\n      }\n      triggerByRetry.current = false;\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n      }\n    },\n    onSuccess: () => {\n      countRef.current = 0;\n    },\n    onError: () => {\n      countRef.current += 1;\n      if (retryCount === -1 || countRef.current <= retryCount) {\n        // Exponential backoff\n        const timeout = retryInterval !== null && retryInterval !== void 0 ? retryInterval : Math.min(1000 * Math.pow(2, countRef.current), 30000);\n        timerRef.current = setTimeout(() => {\n          triggerByRetry.current = true;\n          fetchInstance.refresh();\n        }, timeout);\n      } else {\n        countRef.current = 0;\n      }\n    },\n    onCancel: () => {\n      countRef.current = 0;\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n      }\n    }\n  };\n};\nexport default useRetryPlugin;","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","import throttle from 'lodash/throttle';\nimport { useEffect, useRef } from 'react';\nconst useThrottlePlugin = (fetchInstance, {\n  throttleWait,\n  throttleLeading,\n  throttleTrailing\n}) => {\n  const throttledRef = useRef();\n  const options = {};\n  if (throttleLeading !== undefined) {\n    options.leading = throttleLeading;\n  }\n  if (throttleTrailing !== undefined) {\n    options.trailing = throttleTrailing;\n  }\n  useEffect(() => {\n    if (throttleWait) {\n      const _originRunAsync = fetchInstance.runAsync.bind(fetchInstance);\n      throttledRef.current = throttle(callback => {\n        callback();\n      }, throttleWait, options);\n      // throttle runAsync should be promise\n      // https://github.com/lodash/lodash/issues/4400#issuecomment-834800398\n      fetchInstance.runAsync = (...args) => {\n        return new Promise((resolve, reject) => {\n          var _a;\n          (_a = throttledRef.current) === null || _a === void 0 ? void 0 : _a.call(throttledRef, () => {\n            _originRunAsync(...args).then(resolve).catch(reject);\n          });\n        });\n      };\n      return () => {\n        var _a;\n        fetchInstance.runAsync = _originRunAsync;\n        (_a = throttledRef.current) === null || _a === void 0 ? void 0 : _a.cancel();\n      };\n    }\n  }, [throttleWait, throttleLeading, throttleTrailing]);\n  if (!throttleWait) {\n    return {};\n  }\n  return {\n    onCancel: () => {\n      var _a;\n      (_a = throttledRef.current) === null || _a === void 0 ? void 0 : _a.cancel();\n    }\n  };\n};\nexport default useThrottlePlugin;","import { useEffect } from 'react';\nimport { isFunction } from '../utils';\nimport isDev from '../utils/isDev';\nconst useMount = fn => {\n  if (isDev) {\n    if (!isFunction(fn)) {\n      console.error(`useMount: parameter \\`fn\\` expected to be a function, but got \"${typeof fn}\".`);\n    }\n  }\n  useEffect(() => {\n    fn === null || fn === void 0 ? void 0 : fn();\n  }, []);\n};\nexport default useMount;","import { useCallback, useState } from 'react';\nconst useUpdate = () => {\n  const [, setState] = useState({});\n  return useCallback(() => setState({}), []);\n};\nexport default useUpdate;","import { __awaiter, __rest } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-parameter-properties */\nimport { isFunction } from '../../utils';\nexport default class Fetch {\n  constructor(serviceRef, options, subscribe, initState = {}) {\n    this.serviceRef = serviceRef;\n    this.options = options;\n    this.subscribe = subscribe;\n    this.initState = initState;\n    this.count = 0;\n    this.state = {\n      loading: false,\n      params: undefined,\n      data: undefined,\n      error: undefined\n    };\n    this.state = Object.assign(Object.assign(Object.assign({}, this.state), {\n      loading: !options.manual\n    }), initState);\n  }\n  setState(s = {}) {\n    this.state = Object.assign(Object.assign({}, this.state), s);\n    this.subscribe();\n  }\n  runPluginHandler(event, ...rest) {\n    // @ts-ignore\n    const r = this.pluginImpls.map(i => {\n      var _a;\n      return (_a = i[event]) === null || _a === void 0 ? void 0 : _a.call(i, ...rest);\n    }).filter(Boolean);\n    return Object.assign({}, ...r);\n  }\n  runAsync(...params) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    return __awaiter(this, void 0, void 0, function* () {\n      this.count += 1;\n      const currentCount = this.count;\n      const _l = this.runPluginHandler('onBefore', params),\n        {\n          stopNow = false,\n          returnNow = false\n        } = _l,\n        state = __rest(_l, [\"stopNow\", \"returnNow\"]);\n      // stop request\n      if (stopNow) {\n        return new Promise(() => {});\n      }\n      this.setState(Object.assign({\n        loading: true,\n        params\n      }, state));\n      // return now\n      if (returnNow) {\n        return Promise.resolve(state.data);\n      }\n      (_b = (_a = this.options).onBefore) === null || _b === void 0 ? void 0 : _b.call(_a, params);\n      try {\n        // replace service\n        let {\n          servicePromise\n        } = this.runPluginHandler('onRequest', this.serviceRef.current, params);\n        if (!servicePromise) {\n          servicePromise = this.serviceRef.current(...params);\n        }\n        const res = yield servicePromise;\n        if (currentCount !== this.count) {\n          // prevent run.then when request is canceled\n          return new Promise(() => {});\n        }\n        // const formattedResult = this.options.formatResultRef.current ? this.options.formatResultRef.current(res) : res;\n        this.setState({\n          data: res,\n          error: undefined,\n          loading: false\n        });\n        (_d = (_c = this.options).onSuccess) === null || _d === void 0 ? void 0 : _d.call(_c, res, params);\n        this.runPluginHandler('onSuccess', res, params);\n        (_f = (_e = this.options).onFinally) === null || _f === void 0 ? void 0 : _f.call(_e, params, res, undefined);\n        if (currentCount === this.count) {\n          this.runPluginHandler('onFinally', params, res, undefined);\n        }\n        return res;\n      } catch (error) {\n        if (currentCount !== this.count) {\n          // prevent run.then when request is canceled\n          return new Promise(() => {});\n        }\n        this.setState({\n          error,\n          loading: false\n        });\n        (_h = (_g = this.options).onError) === null || _h === void 0 ? void 0 : _h.call(_g, error, params);\n        this.runPluginHandler('onError', error, params);\n        (_k = (_j = this.options).onFinally) === null || _k === void 0 ? void 0 : _k.call(_j, params, undefined, error);\n        if (currentCount === this.count) {\n          this.runPluginHandler('onFinally', params, undefined, error);\n        }\n        throw error;\n      }\n    });\n  }\n  run(...params) {\n    this.runAsync(...params).catch(error => {\n      if (!this.options.onError) {\n        console.error(error);\n      }\n    });\n  }\n  cancel() {\n    this.count += 1;\n    this.setState({\n      loading: false\n    });\n    this.runPluginHandler('onCancel');\n  }\n  refresh() {\n    // @ts-ignore\n    this.run(...(this.state.params || []));\n  }\n  refreshAsync() {\n    // @ts-ignore\n    return this.runAsync(...(this.state.params || []));\n  }\n  mutate(data) {\n    const targetData = isFunction(data) ? data(this.state.data) : data;\n    this.runPluginHandler('onMutate', targetData);\n    this.setState({\n      data: targetData\n    });\n  }\n}","import { __rest } from \"tslib\";\nimport useCreation from '../../useCreation';\nimport useLatest from '../../useLatest';\nimport useMemoizedFn from '../../useMemoizedFn';\nimport useMount from '../../useMount';\nimport useUnmount from '../../useUnmount';\nimport useUpdate from '../../useUpdate';\nimport Fetch from './Fetch';\nfunction useRequestImplement(service, options = {}, plugins = []) {\n  const {\n      manual = false\n    } = options,\n    rest = __rest(options, [\"manual\"]);\n  const fetchOptions = Object.assign({\n    manual\n  }, rest);\n  const serviceRef = useLatest(service);\n  const update = useUpdate();\n  const fetchInstance = useCreation(() => {\n    const initState = plugins.map(p => {\n      var _a;\n      return (_a = p === null || p === void 0 ? void 0 : p.onInit) === null || _a === void 0 ? void 0 : _a.call(p, fetchOptions);\n    }).filter(Boolean);\n    return new Fetch(serviceRef, fetchOptions, update, Object.assign({}, ...initState));\n  }, []);\n  fetchInstance.options = fetchOptions;\n  // run all plugins hooks\n  fetchInstance.pluginImpls = plugins.map(p => p(fetchInstance, fetchOptions));\n  useMount(() => {\n    if (!manual) {\n      // useCachePlugin can set fetchInstance.state.params from cache when init\n      const params = fetchInstance.state.params || options.defaultParams || [];\n      // @ts-ignore\n      fetchInstance.run(...params);\n    }\n  });\n  useUnmount(() => {\n    fetchInstance.cancel();\n  });\n  return {\n    loading: fetchInstance.state.loading,\n    data: fetchInstance.state.data,\n    error: fetchInstance.state.error,\n    params: fetchInstance.state.params || [],\n    cancel: useMemoizedFn(fetchInstance.cancel.bind(fetchInstance)),\n    refresh: useMemoizedFn(fetchInstance.refresh.bind(fetchInstance)),\n    refreshAsync: useMemoizedFn(fetchInstance.refreshAsync.bind(fetchInstance)),\n    run: useMemoizedFn(fetchInstance.run.bind(fetchInstance)),\n    runAsync: useMemoizedFn(fetchInstance.runAsync.bind(fetchInstance)),\n    mutate: useMemoizedFn(fetchInstance.mutate.bind(fetchInstance))\n  };\n}\nexport default useRequestImplement;","import useAutoRunPlugin from './plugins/useAutoRunPlugin';\nimport useCachePlugin from './plugins/useCachePlugin';\nimport useDebouncePlugin from './plugins/useDebouncePlugin';\nimport useLoadingDelayPlugin from './plugins/useLoadingDelayPlugin';\nimport usePollingPlugin from './plugins/usePollingPlugin';\nimport useRefreshOnWindowFocusPlugin from './plugins/useRefreshOnWindowFocusPlugin';\nimport useRetryPlugin from './plugins/useRetryPlugin';\nimport useThrottlePlugin from './plugins/useThrottlePlugin';\nimport useRequestImplement from './useRequestImplement';\n// function useRequest<TData, TParams extends any[], TFormated, TTFormated extends TFormated = any>(\n//   service: Service<TData, TParams>,\n//   options: OptionsWithFormat<TData, TParams, TFormated, TTFormated>,\n//   plugins?: Plugin<TData, TParams>[],\n// ): Result<TFormated, TParams>\n// function useRequest<TData, TParams extends any[]>(\n//   service: Service<TData, TParams>,\n//   options?: OptionsWithoutFormat<TData, TParams>,\n//   plugins?: Plugin<TData, TParams>[],\n// ): Result<TData, TParams>\nfunction useRequest(service, options, plugins) {\n  return useRequestImplement(service, options, [...(plugins || []), useDebouncePlugin, useLoadingDelayPlugin, usePollingPlugin, useRefreshOnWindowFocusPlugin, useThrottlePlugin, useAutoRunPlugin, useCachePlugin, useRetryPlugin]);\n}\nexport default useRequest;","import { __rest } from \"tslib\";\nimport { useMemo } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useRequest from '../useRequest';\nconst usePagination = (service, options = {}) => {\n  var _a;\n  const {\n      defaultPageSize = 10,\n      defaultCurrent = 1\n    } = options,\n    rest = __rest(options, [\"defaultPageSize\", \"defaultCurrent\"]);\n  const result = useRequest(service, Object.assign({\n    defaultParams: [{\n      current: defaultCurrent,\n      pageSize: defaultPageSize\n    }],\n    refreshDepsAction: () => {\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      changeCurrent(1);\n    }\n  }, rest));\n  const {\n    current = 1,\n    pageSize = defaultPageSize\n  } = result.params[0] || {};\n  const total = ((_a = result.data) === null || _a === void 0 ? void 0 : _a.total) || 0;\n  const totalPage = useMemo(() => Math.ceil(total / pageSize), [pageSize, total]);\n  const onChange = (c, p) => {\n    let toCurrent = c <= 0 ? 1 : c;\n    const toPageSize = p <= 0 ? 1 : p;\n    const tempTotalPage = Math.ceil(total / toPageSize);\n    if (toCurrent > tempTotalPage) {\n      toCurrent = Math.max(1, tempTotalPage);\n    }\n    const [oldPaginationParams = {}, ...restParams] = result.params || [];\n    result.run(Object.assign(Object.assign({}, oldPaginationParams), {\n      current: toCurrent,\n      pageSize: toPageSize\n    }), ...restParams);\n  };\n  const changeCurrent = c => {\n    onChange(c, pageSize);\n  };\n  const changePageSize = p => {\n    onChange(current, p);\n  };\n  return Object.assign(Object.assign({}, result), {\n    pagination: {\n      current,\n      pageSize,\n      total,\n      totalPage,\n      onChange: useMemoizedFn(onChange),\n      changeCurrent: useMemoizedFn(changeCurrent),\n      changePageSize: useMemoizedFn(changePageSize)\n    }\n  });\n};\nexport default usePagination;","import { __rest } from \"tslib\";\nimport { useEffect, useRef, useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport usePagination from '../usePagination';\nimport useUpdateEffect from '../useUpdateEffect';\nconst useAntdTable = (service, options = {}) => {\n  var _a;\n  const {\n      form,\n      defaultType = 'simple',\n      defaultParams,\n      manual = false,\n      refreshDeps = [],\n      ready = true\n    } = options,\n    rest = __rest(options, [\"form\", \"defaultType\", \"defaultParams\", \"manual\", \"refreshDeps\", \"ready\"]);\n  const result = usePagination(service, Object.assign({\n    manual: true\n  }, rest));\n  const {\n    params = [],\n    run\n  } = result;\n  const cacheFormTableData = params[2] || {};\n  const [type, setType] = useState((cacheFormTableData === null || cacheFormTableData === void 0 ? void 0 : cacheFormTableData.type) || defaultType);\n  const allFormDataRef = useRef({});\n  const defaultDataSourceRef = useRef([]);\n  const isAntdV4 = !!(form === null || form === void 0 ? void 0 : form.getInternalHooks);\n  // get current active field values\n  const getActiveFieldValues = () => {\n    if (!form) {\n      return {};\n    }\n    // antd 4\n    if (isAntdV4) {\n      return form.getFieldsValue(null, () => true);\n    }\n    // antd 3\n    const allFieldsValue = form.getFieldsValue();\n    const activeFieldsValue = {};\n    Object.keys(allFieldsValue).forEach(key => {\n      if (form.getFieldInstance ? form.getFieldInstance(key) : true) {\n        activeFieldsValue[key] = allFieldsValue[key];\n      }\n    });\n    return activeFieldsValue;\n  };\n  const validateFields = () => {\n    if (!form) {\n      return Promise.resolve({});\n    }\n    const activeFieldsValue = getActiveFieldValues();\n    const fields = Object.keys(activeFieldsValue);\n    // antd 4\n    if (isAntdV4) {\n      return form.validateFields(fields);\n    }\n    // antd 3\n    return new Promise((resolve, reject) => {\n      form.validateFields(fields, (errors, values) => {\n        if (errors) {\n          reject(errors);\n        } else {\n          resolve(values);\n        }\n      });\n    });\n  };\n  const restoreForm = () => {\n    if (!form) {\n      return;\n    }\n    // antd v4\n    if (isAntdV4) {\n      return form.setFieldsValue(allFormDataRef.current);\n    }\n    // antd v3\n    const activeFieldsValue = {};\n    Object.keys(allFormDataRef.current).forEach(key => {\n      if (form.getFieldInstance ? form.getFieldInstance(key) : true) {\n        activeFieldsValue[key] = allFormDataRef.current[key];\n      }\n    });\n    form.setFieldsValue(activeFieldsValue);\n  };\n  const changeType = () => {\n    const activeFieldsValue = getActiveFieldValues();\n    allFormDataRef.current = Object.assign(Object.assign({}, allFormDataRef.current), activeFieldsValue);\n    setType(t => t === 'simple' ? 'advance' : 'simple');\n  };\n  const _submit = initPagination => {\n    if (!ready) {\n      return;\n    }\n    setTimeout(() => {\n      validateFields().then((values = {}) => {\n        const pagination = initPagination || Object.assign(Object.assign({\n          pageSize: options.defaultPageSize || 10\n        }, (params === null || params === void 0 ? void 0 : params[0]) || {}), {\n          current: 1\n        });\n        if (!form) {\n          // @ts-ignore\n          run(pagination);\n          return;\n        }\n        // record all form data\n        allFormDataRef.current = Object.assign(Object.assign({}, allFormDataRef.current), values);\n        // @ts-ignore\n        run(pagination, values, {\n          allFormData: allFormDataRef.current,\n          type\n        });\n      }).catch(err => err);\n    });\n  };\n  const reset = () => {\n    if (form) {\n      form.resetFields();\n    }\n    _submit();\n  };\n  const submit = e => {\n    var _a;\n    (_a = e === null || e === void 0 ? void 0 : e.preventDefault) === null || _a === void 0 ? void 0 : _a.call(e);\n    _submit();\n  };\n  const onTableChange = (pagination, filters, sorter, extra) => {\n    const [oldPaginationParams, ...restParams] = params || [];\n    run(Object.assign(Object.assign({}, oldPaginationParams), {\n      current: pagination.current,\n      pageSize: pagination.pageSize,\n      filters,\n      sorter,\n      extra\n    }), ...restParams);\n  };\n  // init\n  useEffect(() => {\n    // if has cache, use cached params. ignore manual and ready.\n    if (params.length > 0) {\n      allFormDataRef.current = (cacheFormTableData === null || cacheFormTableData === void 0 ? void 0 : cacheFormTableData.allFormData) || {};\n      restoreForm();\n      // @ts-ignore\n      run(...params);\n      return;\n    }\n    if (!manual && ready) {\n      allFormDataRef.current = (defaultParams === null || defaultParams === void 0 ? void 0 : defaultParams[1]) || {};\n      restoreForm();\n      _submit(defaultParams === null || defaultParams === void 0 ? void 0 : defaultParams[0]);\n    }\n  }, []);\n  // change search type, restore form data\n  useUpdateEffect(() => {\n    if (!ready) {\n      return;\n    }\n    restoreForm();\n  }, [type]);\n  // refresh & ready change on the same time\n  const hasAutoRun = useRef(false);\n  hasAutoRun.current = false;\n  useUpdateEffect(() => {\n    if (!manual && ready) {\n      hasAutoRun.current = true;\n      if (form) {\n        form.resetFields();\n      }\n      allFormDataRef.current = (defaultParams === null || defaultParams === void 0 ? void 0 : defaultParams[1]) || {};\n      restoreForm();\n      _submit(defaultParams === null || defaultParams === void 0 ? void 0 : defaultParams[0]);\n    }\n  }, [ready]);\n  useUpdateEffect(() => {\n    if (hasAutoRun.current) {\n      return;\n    }\n    if (!ready) {\n      return;\n    }\n    if (!manual) {\n      hasAutoRun.current = true;\n      result.pagination.changeCurrent(1);\n    }\n  }, [...refreshDeps]);\n  return Object.assign(Object.assign({}, result), {\n    tableProps: {\n      dataSource: ((_a = result.data) === null || _a === void 0 ? void 0 : _a.list) || defaultDataSourceRef.current,\n      loading: result.loading,\n      onChange: useMemoizedFn(onTableChange),\n      pagination: {\n        current: result.pagination.current,\n        pageSize: result.pagination.pageSize,\n        total: result.pagination.total\n      }\n    },\n    search: {\n      submit: useMemoizedFn(submit),\n      type,\n      changeType: useMemoizedFn(changeType),\n      reset: useMemoizedFn(reset)\n    }\n  });\n};\nexport default useAntdTable;"],"names":["createUpdateEffect","hook","effect","deps","isMounted","useRef","__rest","s","t","p","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","isFunction","isDev","isDev$1","useMemoizedFn","fn","fnRef","useMemo","memoizedFn","args","useUpdateEffect","useEffect","useAutoRunPlugin","fetchInstance","manual","ready","defaultParams","refreshDeps","refreshDepsAction","hasAutoRun","useAutoRunPlugin$1","depsAreSame","oldDeps","i","useCreation","factory","current","useLatest","ref","useUnmount","useUnmount$1","cache","setCache","key","cacheTime","cachedData","currentCache","timer","getCache","cachePromise","getCachePromise","cacheKey","setCachePromise","promise","res","listeners","trigger","data","item","subscribe","listener","index","useCachePlugin","staleTime","customSetCache","customGetCache","unSubscribeRef","currentPromiseRef","_setCache","cache.setCache","cacheSubscribe.trigger","_getCache","params","cache.getCache","cacheData","cacheSubscribe.subscribe","_a","service","servicePromise","cachePromise.getCachePromise","cachePromise.setCachePromise","d","useCachePlugin$1","useDebouncePlugin","debounceWait","debounceLeading","debounceTrailing","debounceMaxWait","debouncedRef","options","ret","_originRunAsync","debounce","callback","useDebouncePlugin$1","useLoadingDelayPlugin","loadingDelay","timerRef","cancelTimeout","useLoadingDelayPlugin$1","isBrowser","isBrowser$1","isDocumentVisible","revalidate","usePollingPlugin","pollingInterval","pollingWhenHidden","pollingErrorRetryCount","unsubscribeRef","countRef","stopPolling","subscribeReVisible","usePollingPlugin$1","limit","timespan","pending","isOnline","useRefreshOnWindowFocusPlugin","refreshOnWindowFocus","focusTimespan","stopSubscribe","limitRefresh","subscribeFocus","useRefreshOnWindowFocusPlugin$1","useRetryPlugin","retryInterval","retryCount","triggerByRetry","timeout","useRetryPlugin$1","require$$0","isObject","require$$1","FUNC_ERROR_TEXT","throttle","func","wait","leading","trailing","throttle_1","useThrottlePlugin","throttleWait","throttleLeading","throttleTrailing","throttledRef","useThrottlePlugin$1","useMount","useMount$1","useUpdate","setState","useState","useCallback","useUpdate$1","Fetch","serviceRef","initState","event","rest","_b","_c","_d","_e","_f","_g","_h","_j","_k","currentCount","_l","stopNow","returnNow","state","error","targetData","useRequestImplement","plugins","fetchOptions","update","useRequest","usePagination","defaultPageSize","defaultCurrent","changeCurrent","pageSize","total","totalPage","onChange","c","toCurrent","toPageSize","tempTotalPage","oldPaginationParams","restParams","changePageSize","usePagination$1","useAntdTable","form","defaultType","run","cacheFormTableData","type","setType","allFormDataRef","defaultDataSourceRef","isAntdV4","getActiveFieldValues","allFieldsValue","activeFieldsValue","validateFields","fields","errors","values","restoreForm","changeType","_submit","initPagination","pagination","err","reset","submit","onTableChange","filters","sorter","extra","useAntdTable$1"],"mappings":"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"}